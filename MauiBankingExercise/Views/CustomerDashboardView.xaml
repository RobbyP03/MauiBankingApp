<?xml version="1.0" encoding="utf-8" ?>
<views:BasePage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MauiBankingExercise.Views.CustomerDashboardView"
             xmlns:viewmodels="clr-namespace:MauiBankingExercise.ViewModels"
             xmlns:views="clr-namespace:MauiBankingExercise.Views"
             xmlns:models="clr-namespace:MauiBankingExercise.Models"
             Title="{Binding Customer.FirstName}" x:DataType="viewmodels:CustomerDashboardViewModel">

    <ScrollView>
        <StackLayout Padding="20">

            <!-- Customer Name Header -->
            <Label Text="{Binding Customer.FirstName, StringFormat='Welcome, {0}'}"
                   FontAttributes="Bold" 
                   Margin="0,0,0,10"
                   FontSize="24"
                   HorizontalOptions="Center" />

            <Label Text="{Binding Customer.LastName}"
                   FontAttributes="Bold"
                   Margin="0,0,0,20"
                   FontSize="20"
                   HorizontalOptions="Center" />

            <!-- Customer Accounts List -->
            <CollectionView ItemsSource="{Binding CustomerAccounts}" 
                            SelectionMode="Single" 
                            SelectedItem="{Binding SelectedAccount}">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="models:Account">
                        <Border Margin="5" 
                                Padding="15" 
                                BackgroundColor="LightBlue" 
                                Stroke="Gray" 
                                StrokeThickness="1">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="10"/>
                            </Border.StrokeShape>

                            <Grid RowDefinitions="Auto,Auto,Auto" 
                                  ColumnDefinitions="*,Auto">

                                <!-- Account Number -->
                                <Label Text="{Binding AccountNumber, StringFormat='Account: {0}'}" 
                                       FontSize="16"
                                       FontAttributes="Bold" 
                                       Grid.Row="0" 
                                       Grid.Column="0"/>

                                <!-- Account Balance -->
                                <Label Text="{Binding AccountBalance, StringFormat='R{0:N2}'}" 
                                       FontSize="20"
                                       FontAttributes="Bold" 
                                       TextColor="Green"
                                       Grid.Row="0" 
                                       Grid.Column="1"/>

                                <!-- Date Opened -->
                                <Label Text="{Binding DateOpened, StringFormat='Opened: {0:MMM dd, yyyy}'}" 
                                       FontSize="12"
                                       TextColor="Gray"
                                       Grid.Row="2" 
                                       Grid.ColumnSpan="2"/>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <Label Text="Tap on an account above to view transactions and make new transactions"
                   FontSize="14"
                   FontAttributes="Italic"
                   HorizontalOptions="Center"
                   Margin="0,20,0,0"
                   TextColor="Gray"/>

        </StackLayout>
    </ScrollView>
</views:BasePage>